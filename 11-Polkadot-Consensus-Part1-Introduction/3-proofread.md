```
---
proofreader: Kaichao
completion-date: 2022-06-19
---
```

![](https://polkadot.network/content/images/2019/12/consensus-1@2x-2.png)

这个系列将是关于 Polkadot 的安全和共识的讨论。在第一部分中，我们将定义一些术语，然后再讨论 Polkadot 如何创建和保护区块的细节。

共识算法能够帮助计算机网络像单一计算机一样运行。通常，这意味着网络中几乎每台计算机都必须就一些初始状态达成一致，并且之后对基于初始状态的确定性操作日志达成一致，从而使它们到达相同的最终状态。

虽然区块链给这个领域带来了一些有趣的工具，但这种协调问题并不新鲜。它起源于航空航天，由于太空的荒凉性质，卫星或高空飞机上的计算机可能会有任意的行为。想象一下，你有一个飞行计算机的网络，你想知道你的飞机在往哪个方向走。不管你问网络中的哪台计算机，你都应该得到相同的回应。

这与区块链有什么关系？我们希望计算机网络在一些价值上达成一致。这个价值可以是一个账户的余额，投票的结果或一个智能合约的执行结果。

事实上，一些先前存在的共识算法类似于区块链。在 2001 年的一次演讲中，麻省理工学院教授 Barbara Liskov 谈到了分批交易，以提高实用拜占庭容错（PBFT）的性能，这比比特币的出现还要早。

"想象一下，一个非常繁忙的主，它被一个又一个的请求击中；它实际上并没有为每个请求启动协议。相反，它收集了一批请求，并为这批请求做一个协议。......并不是真的需要每个人都向客户端发送一个回复。如果除了一个人之外，所有的人都发送回复的摘要也是可以的，因为这将足以让客户端知道它是否有相同的回复"。

PBFT 提供了一套规则来商定状态变化 -- 甚至是一批（称作块）状态变化。

## 分解区块链共识
在一个像区块链这样的分布式系统中，你需要回答几个问题：

谁可以提出下一个改变？
哪一组变化是最终的？
如果有人违反规则会怎样？
尽早做出这些区分是很重要的，因为许多区块链共识协议将它们统一为一个。例如，工作量证明（Proof of work）使用这一证明来选择区块的合适生产者；用最长链规则来决定哪条链是最终的；用制作该证明的成本作为违反规则的惩罚。在 Polkadot 中，这些问题都是单独回答的。

非区块链系统仍然回答这些问题。例如，人们可以假设所有计算机都运行相同的软件。在大多数情况下，这很好。如果波音公司制造了一架飞机，我们可以安全地假设他们对飞机上的所有计算机进行编程。

然而，在一个公共网络中，我们不能做这样的假设。区块链让我们通过使用经济学来凿开我们的一些网络假设。所有的共识系统都有 "好" 和 "坏" 行为的概念。区块链的内在经济属性让我们能够奖励好的行为或惩罚坏的行为。一个权益证明网络使用经济学作为保障其共识的直接手段。

区块链系统的安全性是对破坏共识的难度的衡量。在权威证明中，安全性是控制当局的难度。在工作量证明中，安全是获取和操作足够的哈希值以创建比网络更长的链的成本。而在权益证明中，安全是指被质押呆逼的价值和处于风险地位代币的价值。

Parity Technologies 和 Web3 基金会的成员开发并实现了一个算法库来解决共识和安全问题。在这个系列中，我们将从 GRANDPA 开始，我们的最终性算法，因为所有的区块生产算法都必须遵从这个最终性。然后我们将转向 BABE，我们的区块生产引擎，并讨论我们如何将区块添加到链上。最后，我们将讨论我们如何利用经济学来保证 GRANDPA 和 BABE 的安全。